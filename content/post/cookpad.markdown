---
layout: post
title: "クックパッド第5回 開発コンテスト24に参戦した話"
date: 2014-10-20
comments: true
categories: [cookpad, contest, golang]
---

先日も[ISUCONコンテスト予選](http://isucon.net/)に出たばかりですが、土日(10月18-19日)に
[クックパッドの「第5回 開発コンテスト24」](https://info.cookpad.com/24contest_5)に参戦しました。

[勝手にアニバーサリー ～なんでもない日を、あの人との記念日に。～](http://kinen.yabuchin.com/)が成果物です。
ちなみに、タイトルは僕が初め適当に提案したのが意外と良かったらしくそのまま採用されました（｀・ω・´）

## メンバー

こんな感じのバランスの良いメンバーが集まりました(　´･‿･｀)

- [僕](https://www.facebook.com/mono0926)
	- iOSアプリか適当なGoコード書く予定 (結果Goコード書いてた)
- [やぶさん](https://www.facebook.com/yuichi.yabu)
	- サーバーサイド(普段Scala使ってるけど、今回はGo)
- [の奥さん](https://www.facebook.com/sayaka.yabu.7)
	- [Data Veraci](http://www.nssol.nssmc.com/press/2014/20141009_110001.html)を作った方 (前職の先輩)
- [ひつじさん](https://www.facebook.com/3is.sheep)
	- yah○○のデザイナーさん
- [のんたん☆](https://www.facebook.com/nozomi.fuzimoto)
	- 恵比寿のデザイナーさん

僕が平均年齢くらいの華やかなメンバーでした。

## 当日まで

<!-- more -->

- レポジトリ作成: [SYM-CONTEST/Cookpad2014](https://github.com/SYM-CONTEST/Cookpad2014)
- Facebookイベント作成: [クックパッド 第5回 開発コンテスト24](https://www.facebook.com/events/718375174865939/)
- Slack用意
	- 自宅警備もする必要があるので、オンライン上でやりとりして開発
- yah○○のBASE6で打ち合わせ(ひつじさんからのご招待)
	- ここで[のんたん☆](https://www.facebook.com/nozomi.fuzimoto)の参戦決定（｀・ω・´）

![](/images/post/base6_1.jpg)
![](/images/post/base6_2.jpg)
![](/images/post/base6_3.jpg)
![](/images/post/base6_4.jpg)


## 当日

去年も[余命チェッカー](http://about.me/yomei)で参戦してたので、大体勝手は分かっていました。

### 朝9時

[クックパッドの「第5回 開発コンテスト24」](https://info.cookpad.com/24contest_5)をリロードして、お題が「誰かと話すキッカケを作るサービス」であることを把握。

元々、10時までに作るネタが決まらなかったら解散というオレオレレギュレーションをやっていたので、時間を気にしつつネタ出し。  
けっこう良いアイディアが出るものの、コンテスト受けしそうか微妙な感じで、なかなか収束せず。  
雰囲気的に10時過ぎてもそのまま続行することにして、最低午前中にという感じで結果、過去に何かつながりがあってご無沙汰な人間関係を、勝手に記念日をでっちあげて祝うことで結びつけるサービスになりました。

具体的には、Twitterで過去に絡んだ人たちに、そのやり取りのキーワードを抽出して○○記念日のメッセージを投げるみたいな。
(Twitterに限らずもっと膨らませたかったけど、実装コストの兼ね合いもあり)

### 1日目昼

作るものが決まったので、もう少し仕様や画面を詰めるような相談をしたり、出来るところは実装始めたり。
#### やぶさん達はいつの間にかお寿司屋さん行ってました（´・д・｀）

僕は不慣れなGo言語での以下の2点の実装法を手短に調べて、うんいけそうみたいな感触を得ました。

- Twitter認証
	- [mrjones/oauth](https://github.com/mrjones/oauth)採用
- Twitter APIで過去のやり取りを取得
	- [ChimeraCoder/anaconda](https://github.com/ChimeraCoder/anaconda)採用

そんなこんなで、Googleハングアウト使いながら、みんなで色々お話しつつ作業。

夕方くらいに、それぞれ私用・仕事・昼寝などで散らばってしまいました（´・ω・｀）

僕はキャラクター [アニバちゃんのTwitterアカウント](https://twitter.com/kinenn_bi)作って遊んだりしてました(　´･‿･｀)

### 1日目夜

夜になると、またみんな戻ってきて、僕も黙々と実装。  
Twitter認証周りはやぶさんにお願いして、僕は過去のやり取りを取得して良い感じの記念日を作るところをガリガリGoで書いていました。

### 深夜

引き続きみんなゴリゴリ実装したりデザイン作ったり。

2時くらいに、やぶさん実装とのインターフェース決めて、1時間くらいそのあたり仕上げて寝ました(一番乗り)。

寝る間際に[アニバちゃん](https://twitter.com/kinenn_bi)で置き土産残したら、ひどいことになったようです(　´･‿･｀)

![](/images/post/misawa.png)

### 2日目朝

7時くらいに起きました。  
やぶさん(完徹)以外は皆寝てました。  
やぶさんは一部うまく行かないところあって泣きそうでした。

僕の実装の問題もあったり、結合後のテストでバグ出たところの対応したり。  
あと、記念日抽出ロジックの改良などして、ギリギリ9時くらいに収束。

Goは基本的に型セーフで変更がしやすかったです。

30分くらい前にフォームの入力し始めるドタバタ感がありつつ、無事に応募完了。

### 9時の提出後のドタバタ

なんかよく落ちるみたいな問題があって、対応。
特に、僕が`log.Fatalln`しちゃってたのがインパクト大きかった模様。

開発時はこれで良かったかもだけど、リリースしたので、取り急ぎ`log.Println`に変更。
error出たときのハンドリングとして統一的にやっていたので、対応は一瞬でした。
(`log.Println`がこの文脈で適切かはよく分からなかったがとりあえず落とさないように)

あと一部例外系に対応したりして、けっこう安定。

と思いきや、まだ1箇所認証周りで落ちるところがあとで発覚して、あまり深く調べず今でもまだ直ってません（´・ω・｀）

### 結果

2日目夕方くらいに発表されましたが、入選ならずで残念でした。  
ちょくちょくサービスダウンしてて不安定だったのが響いたかも（´-ω-｀）  
皆さん(特にやぶさん)、お疲れさまでした。  
つらたんでしたが、楽しかったです、Goの勉強にもなったし(　´･‿･｀)  
24時間コンテスト系はきついですが、また似たようなの参戦しましょう。
